var legend_watersheds = '<i style="background: blue; opacity: 0.5"></i><p><b>Watersheds</b></p>';

var layers = {
    shellfish: {
        layer: L.tileLayer('https://api.mapbox.com/styles/v1/katzbr/cji2mcqbx0t4q2rqxu3vxok9s/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoia2F0emJyIiwiYSI6ImNqOHhmMnBucDIwZm4ycW8ya2d5cHF0cmsifQ.8rcjz0DyWs_ncWfOZ0VwKA')
    },
    watersheds: {
        layer: L.geoJson.ajax('assets/watersheds.geojson', {
            color: 'blue',
            weight: 2,
            opacity: 0.3
        }), legend: legend_watersheds
    },
    satellite: {
        layer: L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoia2F0emJyIiwiYSI6ImNqOHhmMnBucDIwZm4ycW8ya2d5cHF0cmsifQ.8rcjz0DyWs_ncWfOZ0VwKA', {
            id: 'mapbox.satellite'
        })
    }
};

var scenes = {
    landing: {lat: 46, lng: -124, zoom: 7, name: 'Landing'},
    vulnerability_intro: {lat: 46, lng: -124, zoom: 7, name: 'Intro', layers: [layers.shellfish]},
    exposure: {lat: 46, lng: -124, zoom: 7, name: 'Exposure', layers: [layers.watersheds, layers.satellite]},
    sensitivity: {lat: 46, lng: -124, zoom: 7, name: 'Sensitivity', layers: [layers.watersheds, layers.satellite]},
    adaptive_capacity: {lat: 46, lng: -124, zoom: 7, name: 'Adaptive Capacity', layers: [layers.watersheds, layers.satellite]},
    vulnerability_combined: {lat: 46, lng: -124, zoom: 7, name: 'Combined', layers: [layers.watersheds, layers.shellfish]},
    regional_assessment: {lat: 46, lng: -124, zoom: 7, name: 'Assessment'}
};

$('#storymap').storymap({
    scenes: scenes,
    baselayer: layers.shellfish,
    navbar: true,
    legend: true,
    credits: "",
    loader: true,
    scalebar: false,
    flyo: true,
    navwidget: true,

    createMap: function () {
        // create a map in the "map" div, set the view to a given place and zoom
        var map = L.map($(".storymap-map")[0], {
            zoomControl: false, scrollWheelZoom: false, fadeAnimation: true,
            zoomAnimation: true
        }).setView([46, -124], 7);

        return map;
    }
});
